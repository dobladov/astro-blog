---

interface Props {
    title: string;
    description: string;
}

const {title, description} = Astro.props;
---
<div id="sharePlaceholder" />

<script define:vars={{ title, description }}>
    if (navigator.canShare) {
        const shareData = {
            title,
            text: description,
            url: 'Astro.url.href', // @TODO: replace with real url
        }
        const sharePlaceholder = document.querySelector("#sharePlaceholder");
        const shareBtn = document.createElement("button");
        shareBtn.innerText = "Share";

        shareBtn.addEventListener("click", async () => {
            await navigator.share(shareData);
        })

        sharePlaceholder.replaceWith(shareBtn);
    }
</script>
